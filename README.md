# toy-library
DDD(Domain-Driven Design) + JPA 학습을 위한 도서 대출 시스템

## 🎯 학습 목표
- 도메인 주도 설계 방법론 이해
- DDD 에서의 레이어드 아키텍처 설계
- 전략적/전술적 설계 실습
- 애그리게이트, 엔티티, 값 객체 설계
- 도메인 이벤트 기반 비동기 처리
- 동시성 제어 및 낙관적/비관적 락

## 🛠️ 기술 스택
### Core
- Java 21 - 최신 LTS 버전
- Spring Boot 4.0.0-M3 - 웹 애플리케이션 프레임워크
- Gradle 8.14 - 빌드 도구

### Persistence
- Spring Data JPA - ORM 및 리포지토리 패턴
- H2 Database - 개발용 인메모리 DB
- QueryDSL (예정) - 타입 안전 쿼리

### Test
- JUnit 5 - 단위 테스트 프레임워크
- Mockito - Mock 객체 생성
- Spring Boot Test - 통합 테스트

### Optional (필요시 추가)
- Redis - 캐싱, 분산 락
- Kafka - 이벤트 기반 비동기 처리
- Spring Batch - 연체 알림, 통계 배치

## 🏗️ Domain
### 1. **User (사용자 도메인)**
- 회원 가입/탈퇴
- 회원 등급 관리 (일반, VIP, 블랙리스트)
- 대출 이력 관리

### 2. **Book (도서 도메인)**
- 도서 등록/수정/삭제
- 도서 재고 관리
- 도서 상태 관리 (대출가능, 대출중, 분실, 폐기)
- ISBN 관리

### 3. **Catalog (카탈로그 도메인)**
- 카테고리 관리 (소설, 에세이, 기술서 등)
- 도서 분류 및 검색
- 태그 관리

### 4. **Loan (대출 도메인)**
- 도서 대출/반납
- 연장 관리
- 동시성 제어 (같은 책 동시 대출 방지)
- 대출 가능 여부 검증 (연체, 대출 한도)

### 5. **Reservation (예약 도메인)**
- 대출중인 도서 예약
- 예약 우선순위 관리
- 예약 만료 처리

### 6. **Review (리뷰 도메인)**
- 도서 리뷰 작성/수정/삭제
- 평점 관리
- 리뷰 신고 처리

### 7. **Overdue (연체 도메인)**
- 연체 계산 및 관리
- 연체료 산정
- 연체 알림 발송

### 8. **Notification (알림 도메인)**
- 대출/반납 알림
- 예약 도서 입고 알림
- 연체 경고 알림

## ✨ Features
### 📌 Phase 1: 기본 기능 (DDD 기초)
#### 1.1 사용자 관리
- [ ] 회원 가입/로그인
- [ ] 회원 정보 수정
- [ ] 회원 등급 관리
- [ ] 대출 이력 조회

#### 1.2 도서 관리
- [ ] 도서 등록/수정/삭제
- [ ] 도서 검색 (제목, 저자, ISBN)
- [ ] 도서 상세 조회
- [ ] 재고 관리

#### 1.3 카탈로그 관리
- [ ] 카테고리 CRUD
- [ ] 도서 분류
- [ ] 태그 관리

### 📌 Phase 2: 핵심 도메인 (애그리게이트, 도메인 이벤트)
#### 2.1 도서 대출
- [ ] 도서 대출 처리
- [ ] 도서 반납 처리
- [ ] 대출 연장
- [ ] 동시성 제어 (비관적 락)
- [ ] 대출 가능 여부 검증
- [ ] 대출 이력 관리

#### 2.2 예약 시스템
- [ ] 도서 예약
- [ ] 예약 취소
- [ ] 예약 우선순위 처리
- [ ] 예약 만료 (배치)

#### 2.3 리뷰 관리
- [ ] 리뷰 작성/수정/삭제
- [ ] 평점 집계
- [ ] 리뷰 추천/신고

### 📌 Phase 3: 고급 기능 (이벤트, 비동기, CQRS)
#### 3.1 연체 관리
- [ ] 연체 자동 계산 (배치)
- [ ] 연체료 산정
- [ ] 연체 알림 발송
- [ ] 연체 회원 대출 제한

#### 3.2 알림 시스템 (도메인 이벤트)
- [ ] 대출/반납 알림
- [ ] 예약 도서 입고 알림
- [ ] 반납 예정일 알림
- [ ] 연체 경고 알림

#### 3.3 통계 및 리포트 (CQRS 패턴)
- [ ] 인기 도서 통계
- [ ] 대출 통계 (일/월/년)
- [ ] 회원별 대출 분석
- [ ] 카테고리별 통계

### 📌 Phase 4: 확장 기능 (Kafka, Redis)
#### 4.1 캐싱 (Redis)
- [ ] 도서 검색 결과 캐싱
- [ ] 인기 도서 캐싱
- [ ] 세션 관리

#### 4.2 이벤트 기반 아키텍처 (Kafka)
- [ ] 도메인 이벤트 발행
- [ ] 이벤트 소싱
- [ ] 외부 시스템 연동

#### 4.3 분산 락 (Redis)
- [ ] 동시 대출 방지
- [ ] 예약 경쟁 조건 해결

## 🎓 DDD 학습 포인트
### 전략적 설계
- [ ] 바운디드 컨텍스트 식별
- [ ] 컨텍스트 맵 작성
- [ ] 핵심 도메인 선정 (대출 시스템)

### 전술적 설계
- [ ] 엔티티 설계 (User, Book, Loan)
- [ ] 값 객체 설계 (ISBN, LoanPeriod, Rating)
- [ ] 애그리게이트 설계 (Loan Aggregate)
- [ ] 리포지토리 패턴
- [ ] 도메인 서비스 (LoanService, OverdueService)
- [ ] 도메인 이벤트 (BookBorrowed, BookReturned)

### 아키텍처 패턴
- [ ] 레이어드 아키텍처 적용
- [ ] 의존성 역전 원칙
- [ ] CQRS 패턴 (통계 기능)

